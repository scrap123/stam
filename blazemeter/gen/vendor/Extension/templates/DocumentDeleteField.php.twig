
<?php

    /**
     * Deletes document by setting deleted=time()
     *
     * @param array $options
     */
    public function delete(array $options = array())
    {
        $id = $this->getRepository()->idToMongo($this->getId());
        if(method_exists($this,'preDeleteEvent')){
            $this->preDeleteEvent();
        }
        $this->getRepository()->getCollection()->update(['_id' => $id], ['$set' => ['deleted' => time()]]);
        if(method_exists($this,'postDeleteEvent')){
            $this->postDeleteEvent();
        }
    }

